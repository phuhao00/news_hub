# NewsHub 启动指南

## 概述
NewsHub 是一个完整的新闻聚合平台，包含前端、后端、爬虫服务和 MCP 服务器。

## 快速启动

### 启动所有服务
```powershell
.\start-all.ps1
```

### 停止所有服务
```powershell
.\stop-all.ps1
```

## 服务架构

### 核心服务
1. **前端服务** (Next.js) - 端口 3000
   - 用户界面和交互
   - 访问地址: http://localhost:3000

2. **后端服务** (Go) - 端口 8081
   - API 接口和业务逻辑
   - 访问地址: http://localhost:8081

3. **爬虫服务** (Python) - 端口 8001
   - 新闻数据采集和处理
   - 访问地址: http://localhost:8001

### MCP 服务器 (新增)
4. **Local MCP 服务器** - 端口 8080
   - 本地文件系统访问
   - 提供文件读写、目录列表等功能

5. **Browser MCP 服务器** - 端口 3001
   - 基于 Playwright 的网页抓取
   - 支持 JavaScript 执行和复杂页面处理

### 基础设施服务
6. **MinIO** - 端口 9000/9001
   - 对象存储服务
   - 控制台: http://localhost:9001
   - 凭据: minioadmin / minioadmin123

7. **MongoDB** - 端口 27017
   - 数据库服务
   - 连接字符串: mongodb://localhost:27017

## 启动脚本改进

### start-all.ps1 新功能
- ✅ 端口占用检测 - 避免重复启动服务
- ✅ 服务就绪等待 - 确保服务完全启动
- ✅ MCP 服务器集成 - 自动启动 MCP 服务
- ✅ 错误处理优化 - 更好的错误提示和处理
- ✅ 启动顺序优化 - 按依赖关系启动服务
- ✅ 实时状态检查 - 显示每个服务的运行状态

### stop-all.ps1 新功能
- ✅ 统一停止函数 - 通过端口精确停止服务
- ✅ MCP 服务器支持 - 包含 MCP 服务器停止逻辑
- ✅ 进程清理优化 - 更彻底的进程清理
- ✅ 状态反馈 - 详细的停止状态信息

## 故障排除

### 常见问题
1. **端口被占用**
   - 脚本会自动检测并跳过已占用的端口
   - 使用 `stop-all.ps1` 停止所有服务后重新启动

2. **MCP 服务连接失败**
   - 确保 MCP 服务器已启动（现在自动包含在启动流程中）
   - 检查端口 8080 和 3001 是否可用

3. **服务启动超时**
   - 脚本包含等待逻辑，会自动等待服务就绪
   - 如果超时，检查相应的终端窗口查看错误信息

### 日志查看
- 每个服务在独立的终端窗口中运行
- 可以直接在终端窗口中查看实时日志
- 出现问题时，检查对应服务的终端输出

## 开发环境要求
- Node.js (前端)
- Go (后端)
- Python (爬虫和 MCP 服务)
- Docker (MinIO 和 MongoDB)

## 注意事项
- 首次启动可能需要较长时间下载 Docker 镜像
- 确保所需端口未被其他应用占用
- MCP 服务器现在是爬虫服务的重要组成部分，建议保持启用状态